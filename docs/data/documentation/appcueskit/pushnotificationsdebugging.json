{"metadata":{"modules":[{"name":"AppcuesKit"}],"title":"Debugging Push Notifications","roleHeading":"Article","role":"article"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","type":"heading","text":"Overview","level":2},{"inlineContent":[{"type":"text","text":"Refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Debugging"},{"type":"text","text":" for general details about the Appcues Debugger."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Tap the ","type":"text"},{"inlineContent":[{"text":"Push Notifications Configured","type":"text"}],"type":"strong"},{"text":" row in the Appcues Debugger to check your configuration and send a test push notification. The test push notification include an image. If you do not see the image, review ","type":"text"},{"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsRich","type":"reference","isActive":true},{"text":".","type":"text"}]},{"level":3,"anchor":"Debugger-Error-Codes","type":"heading","text":"Debugger Error Codes"},{"type":"table","header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Error Code"}]}],[{"type":"paragraph","inlineContent":[{"text":"Fix","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"0"}]}],[{"type":"paragraph","inlineContent":[{"text":"The Appcues SDK could not determine which APNs environment your app is running in. This is likely caused by a missing push capability for your main app target.","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"1","type":"text"}]}],[{"inlineContent":[{"type":"text","text":"The Appcues SDK has not received a APNs token. Ensure that 1) you have enabled the push capability for your main app target, 2) "},{"code":"UIApplication.registerForRemoteNotifications()","type":"codeVoice"},{"text":" has been called, and 3) that ","type":"text"},{"code":"UIApplicationDelegate.application(_:didRegisterForRemoteNotificationsWithDeviceToken:)","type":"codeVoice"},{"text":" has been implemented and calls ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/setPushToken(_:)"},{"text":". Review Steps 1, 2, and 3 of ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","isActive":true},{"type":"text","text":"."}],"type":"paragraph"}]],[[{"type":"paragraph","inlineContent":[{"text":"2","type":"text"}]}],[{"inlineContent":[{"text":"Your app has never requested permission to send foreground notifications. For debugging purposes, you can trigger this permission request by retrying the push verification in the Appcues Debugger.","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"3","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"You have previously denied permission for the app to send foreground notifications on your device. You must change this in the iOS System Settings for your app."}],"type":"paragraph"}]],[[{"type":"paragraph","inlineContent":[{"text":"4","type":"text"}]}],[{"inlineContent":[{"type":"text","text":"Your push permission status is not authorized. You must change this in the iOS System Settings for your app."}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"5"}],"type":"paragraph"}],[{"inlineContent":[{"code":"UNUserNotificationCenter.current().delegate","type":"codeVoice"},{"type":"text","text":" is not assigned. Review "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-4-Enable-push-response-handling"},{"type":"text","text":" of "},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","isActive":true},{"text":".","type":"text"}],"type":"paragraph"}]],[[{"type":"paragraph","inlineContent":[{"text":"6","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"code":"UNUserNotificationCenterDelegate.userNotificationCenter(_:didReceive:withCompletionHandler:)","type":"codeVoice"},{"type":"text","text":" is not implemented. Review "},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-4-Enable-push-response-handling","isActive":true},{"type":"text","text":" of "},{"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","type":"reference","isActive":true},{"type":"text","text":"."}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"7"}]}],[{"inlineContent":[{"text":"Your implementation of ","type":"text"},{"type":"codeVoice","code":"UNUserNotificationCenterDelegate.userNotificationCenter(_:didReceive:withCompletionHandler:)"},{"type":"text","text":" is calling the "},{"type":"codeVoice","code":"completionHandler"},{"text":" block too many times. Your implementation should not execute the completion block for Appcues notifications. Review ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-4-Enable-push-response-handling","isActive":true},{"type":"text","text":" of "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually"},{"type":"text","text":"."}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"8","type":"text"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"text":"The Appcues SDK is not receiving the notification response from your implementation of ","type":"text"},{"code":"UNUserNotificationCenterDelegate.userNotificationCenter(_:didReceive:withCompletionHandler:)","type":"codeVoice"},{"type":"text","text":". Ensure that you are passing the notification response to "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/didReceiveNotification(response:completionHandler:)"},{"type":"text","text":". Review "},{"isActive":true,"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-4-Enable-push-response-handling","type":"reference"},{"type":"text","text":" of "},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","isActive":true},{"text":".","type":"text"}]}]],[[{"inlineContent":[{"text":"9","type":"text"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"You have not implemented "},{"type":"codeVoice","code":"UNUserNotificationCenterDelegate.userNotificationCenter(_:willPresent:withCompletionHandler:)"},{"type":"text","text":". This method is optional, but it is recommended to define how to handle notifications that arrive while your app is foregrounded. You will not receive the test push from the Appcues Debugger if this method is not implemented. Review "},{"isActive":true,"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-5-Configure-foreground-handling","type":"reference"},{"type":"text","text":" of "},{"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","isActive":true,"type":"reference"},{"type":"text","text":"."}]}]],[[{"inlineContent":[{"code":"<3-digit>","type":"codeVoice"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"text":"3-digit error codes indicate an error from the server sending a test push and usually are not caused by incorrect configuration of the Appcues SDK. If a server issue is suspected, wait a few minutes and try again or contact Appcues support.","type":"text"}]}]]]}]}],"hierarchy":{"paths":[["doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit","doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues"]]},"schemaVersion":{"major":0,"patch":0,"minor":3},"sections":[],"seeAlsoSections":[{"generated":true,"title":"Push Notifications","identifiers":["doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsRich","doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/enableAutomaticPushConfig()","doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/setPushToken(_:)","doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/didReceiveNotification(response:completionHandler:)"]}],"kind":"article","variants":[{"paths":["\/documentation\/appcueskit\/pushnotificationsdebugging"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"text":"The Appcues Debugger can validate your push notification setup end-to-end.","type":"text"}],"identifier":{"url":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsDebugging","interfaceLanguage":"swift"},"references":{"doc://com.appcues.sdk/documentation/AppcuesKit/PushNotificationsManually":{"kind":"article","title":"Manually Configuring Push Notifications","role":"article","type":"topic","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually","abstract":[{"type":"text","text":"The Appcues iOS SDK supports receiving push notification so you can reach your users whenever the moment is right."}],"url":"\/documentation\/appcueskit\/pushnotificationsmanually"},"doc://com.appcues.sdk/documentation/AppcuesKit":{"role":"collection","url":"\/documentation\/appcueskit","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit","type":"topic","abstract":[{"type":"text","text":"Appcues iOS SDK allows you to integrate Appcues experiences into your native iOS and iPadOS apps."}],"kind":"symbol","title":"AppcuesKit"},"doc://com.appcues.sdk/documentation/AppcuesKit/PushNotificationsManually#Step-4-Enable-push-response-handling":{"url":"\/documentation\/appcueskit\/pushnotificationsmanually#Step-4-Enable-push-response-handling","title":"Step 4. Enable push response handling","abstract":[],"kind":"section","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-4-Enable-push-response-handling","type":"topic"},"doc://com.appcues.sdk/documentation/AppcuesKit/Appcues/setPushToken(_:)":{"kind":"symbol","title":"setPushToken(_:)","role":"symbol","type":"topic","abstract":[{"type":"text","text":"Provide the APNs device token to Appcues."}],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/setPushToken(_:)","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"setPushToken","kind":"identifier"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:10Foundation4DataV","text":"Data"},{"text":"?)","kind":"text"}],"url":"\/documentation\/appcueskit\/appcues\/setpushtoken(_:)"},"doc://com.appcues.sdk/documentation/AppcuesKit/PushNotificationsRich":{"kind":"article","title":"Configuring Rich Push Notifications","role":"article","type":"topic","abstract":[{"type":"text","text":"Rich push notifications are push notifications that include images. Rich push notifications require a Notification Service Extension which modifies the push payload before it’s displayed."}],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsRich","url":"\/documentation\/appcueskit\/pushnotificationsrich"},"doc://com.appcues.sdk/documentation/AppcuesKit/Appcues/enableAutomaticPushConfig()":{"kind":"symbol","title":"enableAutomaticPushConfig()","role":"symbol","type":"topic","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/enableAutomaticPushConfig()","abstract":[{"type":"text","text":"Enables automatic push notification management."}],"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"enableAutomaticPushConfig"},{"kind":"text","text":"()"}],"url":"\/documentation\/appcueskit\/appcues\/enableautomaticpushconfig()"},"doc://com.appcues.sdk/documentation/AppcuesKit/Appcues/didReceiveNotification(response:completionHandler:)":{"kind":"symbol","title":"didReceiveNotification(response:completionHandler:)","role":"symbol","type":"topic","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/didReceiveNotification(response:completionHandler:)","abstract":[{"type":"text","text":"Verifies if a user’s response to a delivered notification is handled by the Appcues SDK."}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"didReceiveNotification","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"response"},{"kind":"text","text":": "},{"preciseIdentifier":"c:objc(cs)UNNotificationResponse","kind":"typeIdentifier","text":"UNNotificationResponse"},{"kind":"text","text":", "},{"text":"completionHandler","kind":"externalParam"},{"text":": () -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"url":"\/documentation\/appcueskit\/appcues\/didreceivenotification(response:completionhandler:)"},"doc://com.appcues.sdk/documentation/AppcuesKit/PushNotificationsManually#Step-5-Configure-foreground-handling":{"title":"Step 5. Configure foreground handling","kind":"section","url":"\/documentation\/appcueskit\/pushnotificationsmanually#Step-5-Configure-foreground-handling","abstract":[],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/PushNotificationsManually#Step-5-Configure-foreground-handling","type":"topic"},"doc://com.appcues.sdk/documentation/AppcuesKit/Debugging":{"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Debugging","type":"topic","kind":"article","url":"\/documentation\/appcueskit\/debugging","role":"article","abstract":[{"type":"text","text":"The Appcues debugger is an in-app overlay that provides debug information in an accessible manner."}],"title":"Using the Appcues Debugger"},"doc://com.appcues.sdk/documentation/AppcuesKit/Appcues":{"url":"\/documentation\/appcueskit\/appcues","abstract":[{"text":"An object that manages Appcues tracking and rendering of experience content, for your app.","type":"text"}],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues","kind":"symbol","role":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Appcues","kind":"identifier"}],"type":"topic","title":"Appcues","navigatorTitle":[{"kind":"identifier","text":"Appcues"}]}}}