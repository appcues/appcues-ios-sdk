{"kind":"article","metadata":{"role":"article","title":"Observing Analytics","modules":[{"name":"AppcuesKit"}],"roleHeading":"Article"},"hierarchy":{"paths":[["doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit"]]},"abstract":[{"text":"A delegate can be registered to allow for the host application to see all of the analytics that are being tracked by the Appcues iOS SDK.","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/appcueskit\/analyticobserving"]}],"sections":[],"schemaVersion":{"minor":3,"patch":0,"major":0},"seeAlsoSections":[{"title":"Observing Analytics","generated":true,"identifiers":["doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate","doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalytic"]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AnalyticObserving"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"Registering-the-AppcuesAnalyticsDelegate","level":2,"type":"heading","text":"Registering the AppcuesAnalyticsDelegate"},{"inlineContent":[{"type":"text","text":"One of the types in your application can adhere to the "},{"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate","type":"reference","isActive":true},{"type":"text","text":" protocol. In the usage example below, this is done with an extension on the "},{"code":"AppDelegate","type":"codeVoice"},{"type":"text","text":". This protocol defines a single function "},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate\/didTrack(analytic:value:properties:isInternal:)","isActive":true},{"type":"text","text":", which provides access to the analytics tracking being done by the SDK."}],"type":"paragraph"},{"syntax":"swift","code":["extension AppDelegate: AppcuesAnalyticsDelegate {","    func didTrack(analytic: AppcuesAnalytic, value: String?, properties: [String: Any]?, isInternal: Bool) {","        \/\/ process and use the analytics tracking information","    }","}"],"type":"codeListing"},{"inlineContent":[{"text":"After both the Appcues iOS SDK and the delegate implementation are initialized, set the delegate for the Appcues iOS SDK to use. In the usage example below, this is done in ","type":"text"},{"code":"application(_:didFinishLaunchingWithOptions:)","type":"codeVoice"},{"type":"text","text":" in the "},{"type":"codeVoice","code":"AppDelegate"},{"text":".","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {","","    \/\/ after other initialization is complete...","    appcues.analyticsDelegate = self","","    return true","}"],"type":"codeListing"},{"type":"heading","text":"Using the Analytics Tracking Data","anchor":"Using-the-Analytics-Tracking-Data","level":2},{"inlineContent":[{"text":"There are two key types of Appcues analytics tracking data to distinguish.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The first type is the internal SDK events - these capture anything that is generated automatically inside of the Appcues SDK, including flow events, session events, and any automatically tracked screens.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The second type is all other analytics - these are all the screens, events, user or group identities that are passed into the SDK from the host application."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"These two types are distinguished using the "},{"type":"codeVoice","code":"isInternal"},{"type":"text","text":" parameter on "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate\/didTrack(analytic:value:properties:isInternal:)"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"heading","level":3,"text":"Amplitude Integration Example","anchor":"Amplitude-Integration-Example"},{"type":"paragraph","inlineContent":[{"text":"In this example use case, an application would like to observe and track all of the internal Appcues SDK events and send them to Amplitude as well. The other events that originate in the main application codebase are already integrated elsewhere in the codebase. The primary goal is to be able to analyze Appcues flow events, using Amplitude.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this example, an extension on the "},{"code":"Amplitude","type":"codeVoice"},{"text":" type is created, which adheres to the ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate","isActive":true},{"type":"text","text":" protocol. This extension will filter out tracking items so that it is only tracking internal analytics of the "},{"type":"codeVoice","code":".event"},{"type":"text","text":" type."}]},{"type":"codeListing","code":["extension Amplitude: AppcuesAnalyticsDelegate {","    public func didTrack(analytic: AppcuesAnalytic, value: String?, properties: [String: Any]?, isInternal: Bool) {","        \/\/ filter out any analytics we're not interested in passing along","        guard isInternal, analytic == .event, let value = value else { return }","","        \/\/ track with Amplitude","        logEvent(value, withEventProperties: properties)","    }","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"After both SDKs have been initialized, set the "},{"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/analyticsDelegate","type":"reference","isActive":true},{"type":"text","text":" reference."}],"type":"paragraph"},{"code":["appcues.analyticsDelegate = Amplitude.instance()"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Now, all of the internal events from the Appcues SDK will also be sent to Amplitude, using the "},{"type":"codeVoice","code":"logEvent"},{"type":"text","text":" function call."}]}]}],"references":{"doc://com.appcues.sdk/documentation/AppcuesKit/AppcuesAnalytic":{"kind":"symbol","navigatorTitle":[{"text":"AppcuesAnalytic","kind":"identifier"}],"role":"symbol","abstract":[{"type":"text","text":"The different types of analytics tracked by the SDK."}],"url":"\/documentation\/appcueskit\/appcuesanalytic","type":"topic","title":"AppcuesAnalytic","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"AppcuesAnalytic","kind":"identifier"}],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalytic"},"doc://com.appcues.sdk/documentation/AppcuesKit/Appcues/analyticsDelegate":{"type":"topic","kind":"symbol","role":"symbol","abstract":[{"text":"The delegate object that observes published analytics events.","type":"text"}],"title":"analyticsDelegate","url":"\/documentation\/appcueskit\/appcues\/analyticsdelegate","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"analyticsDelegate"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AppcuesAnalyticsDelegate","preciseIdentifier":"c:@M@AppcuesKit@objc(pl)AppcuesAnalyticsDelegate"},{"text":"?","kind":"text"}],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/Appcues\/analyticsDelegate"},"doc://com.appcues.sdk/documentation/AppcuesKit/AppcuesAnalyticsDelegate/didTrack(analytic:value:properties:isInternal:)":{"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"didTrack"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"analytic"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"AppcuesAnalytic","preciseIdentifier":"c:@M@AppcuesKit@E@AppcuesAnalytic"},{"kind":"text","text":", "},{"kind":"externalParam","text":"value"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":"?, ","kind":"text"},{"kind":"externalParam","text":"properties"},{"text":": [","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":" : ","kind":"text"},{"kind":"keyword","text":"Any"},{"kind":"text","text":"]?, "},{"kind":"externalParam","text":"isInternal"},{"text":": ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"kind":"text","text":")"}],"url":"\/documentation\/appcueskit\/appcuesanalyticsdelegate\/didtrack(analytic:value:properties:isinternal:)","title":"didTrack(analytic:value:properties:isInternal:)","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate\/didTrack(analytic:value:properties:isInternal:)","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Notifies the delegate after Appcues analytics tracking occurs."}],"required":true},"doc://com.appcues.sdk/documentation/AppcuesKit":{"url":"\/documentation\/appcueskit","title":"AppcuesKit","identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit","type":"topic","kind":"symbol","abstract":[{"text":"Appcues iOS SDK allows you to integrate Appcues experiences into your native iOS and iPadOS apps.","type":"text"}],"role":"collection"},"doc://com.appcues.sdk/documentation/AppcuesKit/AppcuesAnalyticsDelegate":{"type":"topic","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"Allows observation of analytics emitted by the SDK."}],"navigatorTitle":[{"kind":"identifier","text":"AppcuesAnalyticsDelegate"}],"title":"AppcuesAnalyticsDelegate","url":"\/documentation\/appcueskit\/appcuesanalyticsdelegate","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"AppcuesAnalyticsDelegate"}],"identifier":"doc:\/\/com.appcues.sdk\/documentation\/AppcuesKit\/AppcuesAnalyticsDelegate"}}}